(()=>{const t="abnormalhumanbean",e="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",n=`githubRepos_${t}`;function o(n){let o=document.getElementById("repoTableBody");o.innerHTML="",n.forEach((n=>{new Date(n.updated_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});let i=`<tr>\n            <td style="font-weight: bold;">${n.name}</td>\n            <td>${n.language?n.language:"N/A"}</td>\n            <td>${n.description?n.description:"No description"}</td>\n            <td><a href="${n.html_url}"> link </a></td>\n            <td id="lastCommit_${n.name}">Fetching last commit...</td>\n            <td id="commitsSince_${n.name}">Fetching commits...</td>\n            <td><ul id="files_${n.name}"></ul></td>\n        </tr>`;o.innerHTML+=i;let a=1,r=0;const m=()=>{fetch(`https://api.github.com/repos/${t}/${n.name}/commits?per_page=100&page=${a}`,{headers:{Authorization:`token ${e}`}}).then((t=>t.json())).then((t=>{0===t.length?document.getElementById(`commitsSince_${n.name}`).textContent=r:(r+=t.length,a++,m())})).catch((t=>{console.error("Error fetching commits:",t),document.getElementById(`commitsSince_${n.name}`).textContent="Unable to fetch commits"}))};m(),fetch(`https://api.github.com/repos/${t}/${n.name}/commits?per_page=100`,{headers:{Authorization:`token ${e}`}}).then((t=>t.json())).then((t=>{let e=t.length>0?new Date(t[0].commit.author.date).toLocaleDateString("en-US"):"No commits";document.getElementById(`lastCommit_${n.name}`).textContent=e})).catch((t=>{console.error("Error fetching commits:",t),document.getElementById(`lastCommit_${n.name}`).textContent="Unable to fetch last commit"})),fetch(`https://api.github.com/repos/${t}/${n.name}/contents`,{headers:{Authorization:`token ${e}`}}).then((t=>t.json())).then((t=>{t.sort(((t,e)=>"dir"===t.type&&"dir"!==e.type?-1:"dir"!==t.type&&"dir"===e.type?1:0));let e=t.map((t=>"dir"===t.type?`<li><i class="fas fa-folder"></i> ${t.name}</li>`:"file"===t.type&&t.name.endsWith(".md")?`<li><i class="fab fa-markdown"></i> ${t.name}</li>`:"file"===t.type&&(t.name.endsWith(".Rmd")||t.name.endsWith(".Rproj"))?`<li><i class="fab fa-r-project"></i>${t.name}</li>`:`<li><i class="bi bi-file-earmark-code"></i>${t.name}</li>`)).join("");document.getElementById(`files_${n.name}`).innerHTML=e})).catch((t=>{console.error("Error fetching files:",t),document.getElementById(`files_${n.name}`).innerHTML="<li>Unable to fetch files</li>"}))}))}const i=JSON.parse(localStorage.getItem(n));i&&Date.now()-i.timestamp<432e6?o(i.data):fetch(`https://api.github.com/users/${t}/repos`,{headers:{Authorization:`token ${e}`}}).then((t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json()})).then((t=>{if(console.log("Fetched data:",t),!Array.isArray(t))throw new TypeError("Expected an array of repositories");localStorage.setItem(n,JSON.stringify({data:t,timestamp:Date.now()})),o(t)})).catch((t=>{console.error("Error fetching data:",t)}))})();